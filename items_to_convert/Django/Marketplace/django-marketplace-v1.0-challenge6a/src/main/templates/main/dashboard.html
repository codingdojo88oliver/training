{% extends "base.html" %}
{% block content %}

<div class="container">
    <h1>Hi, {{ user.first_name }}! Welcome to the Marketplace.</h1>
    <a href="/add-product" class="my_transactions">Add Products</a>
    <a href="/logout" class="logout">Logout</a>
    {% if messages %}
        {% for message in messages %}
        <div class="alert-danger" role="alert">
            {{ message }}
        </div>
        {% endfor %}
    {% endif %}
    <div class="container" id="my-products">
        <h3>Items I'm Selling:</h3>
        {% if categories %}
            {% for category in categories %}
                <h4>{{ category }}</h4>
                <ul>
                    <li>
                        <p><a class="product" href="">Product Name</a> <span>$100</span></p>
                    </li>
                    <li>
                        <p><a href="">Product Name</a> <span>Your selling price: $200</span></p>
                        <p>Buyer: Jessa R. <span>Asking price: $175</span></p>
                        <p>
                        <form method="POST" action="" class="form-inline">
                            {% csrf_token %}
                            <input type="hidden" name="negotiation_id" value="{{ negotiation.id }}">
                            <button type="submit">Approve</button>
                        </form>                                            
                        </p>
                    </li>
                </ul>
            {% endfor %}
        {% endif %}
    </div>
    <div class="container" id="other-products">
        <h3>Products for Sale:</h3>
        {% if categories %}
            {% for category in categories %}
                <h4>{{ category }}</h4>
                <ul>
                    <li>
                        <p><a class="product" href="">Product Name</a> <span>$100</span></p>
                        <p>Posted by Paul J.</p>
                        <p>
                            <form method="post" action="negotiate">
                                {% csrf_token %}
                                <label for="price">Asking Price:</label>
                                <span>$</span>
                                <input type="number" id="price" placeholder="40.00" name="price">
                                <input type="hidden" name="product_id" value="{{ product.id }}">
                                <button type="submit">Negotiate</button>
                            </form>
                        </p>
                    </li>
                </ul>
            {% endfor %}
        {% endif %}
    </div>
    
    <div class="container" id="negotiating-products">
        <h3>Items I am Negotiating:</h3>
        {% if categories %}
            {% for category in categories %}
                <h4>{{ category }}</h4>
                <ul>
                    <li>
                        <p>
                            <a href="">Product Name</a>
                            <span>Selling price: $150</span>
                        </p>
                        <p>
                            Posted by Mark F.
                            <span>Your asking price: $100</span>
                        </p>
                    </li>
                </ul>
            {% endfor %}
        {% endif %}
    </div>

    <div class="container" id="bought-products">
        <h3>Items Bought:</h3>
        {% if categories %}
            {% for category in categories %}
                <h4>{{ category }}</h4>
                <ul class="items_bought">
                    <li>
                        <p>
                            <a href="">Product Name</a>
                            <span>$150</span>
                        </p>
                        <p>
                            Posted By Mike D.
                        </p>
                    </li>
                </ul>
            {% endfor %}
        {% endif %}    
    </div>
</div>
{% endblock content %}