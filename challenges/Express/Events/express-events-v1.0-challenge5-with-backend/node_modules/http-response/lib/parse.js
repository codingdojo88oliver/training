var cheerio = require('cheerio');

exports.html = function(html) {
	var $ = cheerio.load(html);

	var result = {};

	$('dt span').each(function(index, value) {
		var codeNumber = value.attribs.id;
		if(!codeNumber) return;

		// Slice the title 4 characters to separate the title
		// from the code number
		var title = $(value).parent().text().slice(4);

		var description = $(value).parent().next().text();

		// Remove [*] wikipedia links
		description = description.replace(/\[.{1,20}\]/g, '');

		result[codeNumber] = {
			title: title,
			description: description
		};
	});

	return result;
};

